<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AlcoDriver: –¢–µ—Ä–º–∏–Ω–∞–ª –≠–∫—Å–ø–µ–¥–∏—Ç–æ—Ä–∞</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/lucide@0.263.1/dist/umd/lucide.min.js"></script>

    <style>
        :root {
            --bg-dark: #1e293b;
            --surface: #334155;
            --accent: #3b82f6;
            --success: #22c55e;
            --warning: #f59e0b;
        }
        body { 
            background-color: #0f172a; 
            color: #ffffff;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            -webkit-tap-highlight-color: transparent;
            overscroll-behavior-y: none;
        }
        /* Large touch targets for drivers */
        .btn-large { min-height: 60px; font-size: 1.1rem; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .pb-safe { padding-bottom: calc(env(safe-area-inset-bottom) + 70px); }
        
        .status-badge {
            font-size: 0.7rem;
            text-transform: uppercase;
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 6px;
        }
        
        /* Input overrides for dark mode */
        input[type="number"] {
            -moz-appearance: textfield;
        }
        input[type="number"]::-webkit-outer-spin-button, 
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- ICONS ---
        const Icon = ({ name, size = 24, className = "" }) => {
            const icons = {
                'truck': '<path d="M10 17h4V5H2v12h3"/><path d="M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5"/><path d="M14 17h1"/><circle cx="7.5" cy="17.5" r="2.5"/><circle cx="17.5" cy="17.5" r="2.5"/>',
                'map-pin': '<path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/>',
                'box': '<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" x2="12" y1="22.08" y2="12"/>',
                'check-circle': '<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/>',
                'navigation': '<polygon points="3 11 22 2 13 21 11 13 3 11"/>',
                'phone': '<path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>',
                'banknote': '<rect width="20" height="12" x="2" y="6" rx="2"/><circle cx="12" cy="12" r="2"/><path d="M6 12h.01M18 12h.01"/>',
                'arrow-right': '<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',
                'package-check': '<path d="m16 6 4 4"/><path d="M16 10h4"/><rect width="20" height="16" x="2" y="6" rx="2"/><path d="M12 2v4"/><path d="M12 18v4"/>',
                'refresh-cw': '<path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M3 21v-5h5"/>',
                'qr-code': '<rect width="5" height="5" x="3" y="3" rx="1"/><rect width="5" height="5" x="16" y="3" rx="1"/><rect width="5" height="5" x="3" y="16" rx="1"/><path d="M21 16h-3a2 2 0 0 0-2 2v3"/><path d="M21 21v.01"/><path d="M12 7v3a2 2 0 0 1-2 2H7"/><path d="M3 12h.01"/><path d="M12 3h.01"/><path d="M12 16v.01"/><path d="M16 12h1"/><path d="M21 12v.01"/><path d="M12 21v-1"/>',
                'edit': '<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>'
            };
            return <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} dangerouslySetInnerHTML={{ __html: icons[name] || '' }} />;
        };

        // --- MOCK DATA ---
        const DRIVER_INFO = { name: '–°–∞–Ω—è (–ì–∞–∑–µ–ª—å)', balance: 154000 };
        
        const LOADING_LIST = [
            { id: 1, name: '–ñ–∏–≥—É–ª–µ–≤—Å–∫–æ–µ (–ö–µ–≥–∞)', qty: 15, checked: false },
            { id: 2, name: 'Heineken 0.5', qty: 240, checked: false },
            { id: 3, name: '–í–æ–¥–∫–∞ 0.5', qty: 60, checked: false },
            { id: 4, name: '–°–Ω–µ–∫–∏ (–ö–æ—Ä–æ–±–∫–∞)', qty: 5, checked: false },
        ];

        const ROUTE = [
            { 
                id: 101, name: '–ú–∞–≥–∞–∑–∏–Ω "24/7"', address: '—É–ª. –õ–µ–Ω–∏–Ω–∞ 10', time: '09:00', status: 'done',
                tasks: { unload: true, cash: 45000, kegs: 0 } 
            },
            { 
                id: 102, name: '–ë–∞—Ä "–î–Ω–æ"', address: '–ø–µ—Ä. –ü–∏–≤–Ω–æ–π 5', time: '10:30', status: 'current',
                tasks: { unload: true, cash: 109000, kegs: 4 },
                items: ['–ñ–∏–≥—É–ª–µ–≤—Å–∫–æ–µ (–ö–µ–≥–∞) x3', '–í–æ–¥–∫–∞ 0.5 x10']
            },
            { 
                id: 103, name: '–ò–ü –ü–µ—Ç—Ä–æ–≤', address: '—É–ª. –°–∞–¥–æ–≤–∞—è 15', time: '12:00', status: 'pending',
                tasks: { unload: true, cash: 0, kegs: 2 },
                items: ['Heineken 0.5 x100']
            },
        ];

        // --- COMPONENTS ---

        function App() {
            const [activeTab, setActiveTab] = useState('route'); 
            const [loadingItems, setLoadingItems] = useState(LOADING_LIST);
            const [currentStop, setCurrentStop] = useState(null); 
            const [cashOnHand, setCashOnHand] = useState(DRIVER_INFO.balance);
            const [step, setStep] = useState(0); 
            const [actualKegs, setActualKegs] = useState(0);
            const [enteredCash, setEnteredCash] = useState(0); // State for manual cash entry

            // Helpers
            const formatMoney = (val) => new Intl.NumberFormat('ru-RU', { style: 'currency', currency: 'RUB', maximumFractionDigits: 0 }).format(val);
            const loadingProgress = Math.round((loadingItems.filter(i => i.checked).length / loadingItems.length) * 100);

            // --- TABS ---

            const LoadingScreen = () => (
                <div className="animate-fade pb-safe">
                    <div className="bg-slate-800 p-4 rounded-2xl mb-4 border border-slate-700">
                        <div className="flex justify-between items-end mb-2">
                            <h2 className="text-xl font-bold">–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–∫–ª–∞–¥–µ</h2>
                            <span className="text-2xl font-bold text-blue-400">{loadingProgress}%</span>
                        </div>
                        <div className="w-full bg-slate-700 h-2 rounded-full overflow-hidden">
                            <div className="bg-blue-500 h-full transition-all duration-300" style={{width: `${loadingProgress}%`}}></div>
                        </div>
                    </div>

                    <div className="space-y-3">
                        {loadingItems.map(item => (
                            <div key={item.id} onClick={() => {
                                const newItems = loadingItems.map(i => i.id === item.id ? {...i, checked: !i.checked} : i);
                                setLoadingItems(newItems);
                            }} className={`p-4 rounded-xl border flex justify-between items-center transition-all active:scale-95 ${item.checked ? 'bg-emerald-900/20 border-emerald-500/50' : 'bg-slate-800 border-slate-700'}`}>
                                <div className="flex items-center gap-4">
                                    <div className={`w-8 h-8 rounded-full flex items-center justify-center border-2 ${item.checked ? 'bg-emerald-500 border-emerald-500 text-white' : 'border-slate-500 text-transparent'}`}>
                                        <Icon name="check-circle" size={20}/>
                                    </div>
                                    <div>
                                        <div className={`font-bold ${item.checked ? 'text-emerald-200 line-through' : 'text-white'}`}>{item.name}</div>
                                        <div className="text-sm text-slate-400">{item.qty} —à—Ç</div>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>

                    {loadingProgress === 100 && (
                        <button onClick={() => setActiveTab('route')} className="w-full mt-6 bg-emerald-600 text-white font-bold py-4 rounded-xl shadow-lg shadow-emerald-900/50 animate-pulse">
                            –í–°–ï –ó–ê–ì–†–£–ó–ò–õ, –ü–û–ï–•–ê–õ–ò!
                        </button>
                    )}
                </div>
            );

            const RouteScreen = () => (
                <div className="animate-fade pb-safe">
                    <div className="flex justify-between items-center mb-6 px-2">
                        <div>
                            <h2 className="text-2xl font-bold">–ú–∞—Ä—à—Ä—É—Ç</h2>
                            <div className="text-slate-400 text-sm">3 —Ç–æ—á–∫–∏ ‚Ä¢ ~45 –∫–º</div>
                        </div>
                        <div className="text-right">
                            <div className="text-xs text-slate-500 uppercase">–ù–∞ —Ä—É–∫–∞—Ö</div>
                            <div className={`font-bold text-lg ${cashOnHand > 100000 ? 'text-red-400' : 'text-emerald-400'}`}>{formatMoney(cashOnHand)}</div>
                        </div>
                    </div>

                    <div className="space-y-4">
                        {ROUTE.map((stop, i) => (
                            <div key={stop.id} className={`relative pl-8 pb-8 border-l-2 ${stop.status === 'done' ? 'border-emerald-600' : stop.status === 'current' ? 'border-blue-500' : 'border-slate-700'} last:pb-0 last:border-l-0`}>
                                {/* Timeline Dot */}
                                <div className={`absolute -left-[9px] top-0 w-4 h-4 rounded-full border-2 ${stop.status === 'done' ? 'bg-emerald-600 border-emerald-600' : stop.status === 'current' ? 'bg-blue-500 border-blue-500 animate-pulse' : 'bg-slate-900 border-slate-600'}`}></div>
                                
                                <div onClick={() => { if(stop.status !== 'done') { setCurrentStop(stop); setActualKegs(0); setEnteredCash(stop.tasks.cash); } }} className={`p-4 rounded-2xl border ${stop.status === 'current' ? 'bg-slate-800 border-blue-500/50 shadow-lg shadow-blue-900/20' : 'bg-slate-800/50 border-slate-700 opacity-80'} ${stop.status === 'done' ? 'opacity-50 grayscale' : 'active:scale-95 transition-transform'}`}>
                                    <div className="flex justify-between items-start mb-2">
                                        <div className="font-bold text-lg">{stop.name}</div>
                                        <div className="text-xs font-mono bg-slate-900 px-2 py-1 rounded text-slate-400">{stop.time}</div>
                                    </div>
                                    <div className="flex items-center gap-2 text-sm text-slate-400 mb-3">
                                        <Icon name="map-pin" size={16}/> {stop.address}
                                    </div>
                                    
                                    {/* Tasks Badges */}
                                    <div className="flex gap-2">
                                        {stop.tasks.unload && <span className="status-badge bg-blue-900/40 text-blue-300 border border-blue-500/30">üì¶ –í—ã–≥—Ä—É–∑–∫–∞</span>}
                                        {stop.tasks.cash > 0 && <span className="status-badge bg-emerald-900/40 text-emerald-300 border border-emerald-500/30">üí∞ {formatMoney(stop.tasks.cash)}</span>}
                                        {stop.tasks.kegs > 0 && <span className="status-badge bg-orange-900/40 text-orange-300 border border-orange-500/30">üõ¢Ô∏è –¢–∞—Ä–∞: {stop.tasks.kegs}</span>}
                                    </div>

                                    {stop.status === 'current' && (
                                        <button className="w-full mt-4 bg-blue-600 text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2">
                                            –ù–ê–ß–ê–¢–¨ –†–ê–ë–û–¢–£ <Icon name="arrow-right"/>
                                        </button>
                                    )}
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );

            const CashScreen = () => (
                <div className="animate-fade pb-safe flex flex-col h-full justify-center text-center">
                    <div className="bg-slate-800 p-8 rounded-3xl border border-slate-700 mb-8">
                        <Icon name="banknote" size={64} className="mx-auto mb-4 text-emerald-500"/>
                        <div className="text-slate-400 text-sm uppercase font-bold mb-2">–ò—Ç–æ–≥–æ –≤ –∫–∞—Å—Å–µ</div>
                        <div className="text-4xl font-black text-white mb-4">{formatMoney(cashOnHand)}</div>
                        <div className="text-xs text-slate-500">
                            –õ–∏–º–∏—Ç: 150 000 ‚ÇΩ <br/>
                            {cashOnHand > 150000 ? <span className="text-red-500 font-bold">–ü–†–ï–í–´–®–ï–ù–ò–ï! –°–†–û–ß–ù–û –°–î–ê–¢–¨!</span> : '–í –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã'}
                        </div>
                    </div>

                    <div className="bg-white p-4 rounded-2xl mb-6">
                        <Icon name="qr-code" size={180} className="mx-auto text-black"/>
                        <div className="text-black font-bold mt-2">–ü–æ–∫–∞–∂–∏—Ç–µ –∫–∞—Å—Å–∏—Ä—É</div>
                    </div>

                    <button onClick={() => { setCashOnHand(0); alert('–ö–∞—Å—Å–∞ —Å–¥–∞–Ω–∞!'); }} className="w-full bg-emerald-600 text-white font-bold py-4 rounded-xl text-lg shadow-lg shadow-emerald-900/50 active:scale-95">
                        –ü–û–î–¢–í–ï–†–î–ò–¢–¨ –°–î–ê–ß–£
                    </button>
                </div>
            );

            // --- STOP WORKFLOW MODAL ---

            const StopModal = () => {
                if (!currentStop) return null;

                // Simple state machine for the stop workflow
                const renderStep = () => {
                    switch(step) {
                        case 0: // Arrival Info
                            return (
                                <div className="animate-fade">
                                    <h2 className="text-2xl font-bold mb-2">{currentStop.name}</h2>
                                    <p className="text-slate-400 mb-6">{currentStop.address}</p>
                                    <div className="grid grid-cols-2 gap-4 mb-6 opacity-50 grayscale pointer-events-none">
                                        <button className="bg-slate-700 py-4 rounded-xl flex flex-col items-center justify-center gap-2">
                                            <Icon name="navigation" className="text-blue-400"/>
                                            <span className="text-sm font-bold">–ù–∞–≤–∏–≥–∞—Ç–æ—Ä</span>
                                        </button>
                                        <button className="bg-slate-700 py-4 rounded-xl flex flex-col items-center justify-center gap-2">
                                            <Icon name="phone" className="text-emerald-400"/>
                                            <span className="text-sm font-bold">–ü–æ–∑–≤–æ–Ω–∏—Ç—å</span>
                                        </button>
                                    </div>
                                    <button onClick={() => setStep(1)} className="w-full btn-large bg-blue-600 rounded-xl font-bold flex items-center justify-center gap-2 shadow-lg shadow-blue-900/50">
                                        –Ø –ù–ê –ú–ï–°–¢–ï <Icon name="map-pin"/>
                                    </button>
                                </div>
                            );
                        case 1: // Unload Checklist
                            return (
                                <div className="animate-fade">
                                    <h2 className="text-xl font-bold mb-4 flex items-center gap-2"><Icon name="box"/> –í—ã–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–∞</h2>
                                    <div className="space-y-3 mb-6">
                                        {currentStop.items?.map((item, i) => (
                                            <div key={i} className="p-4 bg-slate-800 rounded-xl flex items-center gap-3">
                                                <input type="checkbox" className="w-6 h-6 rounded accent-blue-500"/>
                                                <span className="text-lg">{item}</span>
                                            </div>
                                        )) || <div className="text-slate-500">–ù–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤ –∫ –≤—ã–≥—Ä—É–∑–∫–µ</div>}
                                    </div>
                                    <button onClick={() => setStep(2)} className="w-full btn-large bg-blue-600 rounded-xl font-bold">
                                        –í–´–ì–†–£–ó–ò–õ, –î–ê–õ–ï–ï
                                    </button>
                                </div>
                            );
                        case 2: // Kegs Collection
                            return (
                                <div className="animate-fade">
                                    <h2 className="text-xl font-bold mb-4 flex items-center gap-2"><Icon name="refresh-cw"/> –ó–∞–±–æ—Ä —Ç–∞—Ä—ã</h2>
                                    <div className="bg-slate-800 p-6 rounded-2xl mb-6 text-center">
                                        <div className="text-slate-400 mb-2">–ü–ª–∞–Ω –ø–æ –Ω–∞–∫–ª–∞–¥–Ω–æ–π</div>
                                        <div className="text-4xl font-bold text-orange-400 mb-6">{currentStop.tasks.kegs} —à—Ç</div>
                                        <div className="text-left text-sm text-slate-500 mb-1">–§–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∑–∞–±—Ä–∞–ª:</div>
                                        <div className="flex gap-2">
                                            <button onClick={() => setActualKegs(Math.max(0, actualKegs - 1))} className="bg-slate-700 p-4 rounded-xl flex-1 font-bold text-xl active:bg-slate-600">-</button>
                                            <div className="bg-slate-900 p-4 rounded-xl flex-[2] font-bold text-xl flex items-center justify-center border border-slate-600">
                                                {actualKegs}
                                            </div>
                                            <button onClick={() => setActualKegs(actualKegs + 1)} className="bg-slate-700 p-4 rounded-xl flex-1 font-bold text-xl active:bg-slate-600">+</button>
                                        </div>
                                    </div>
                                    <button onClick={() => setStep(3)} className="w-full btn-large bg-blue-600 rounded-xl font-bold">
                                        –¢–ê–†–£ –ó–ê–ë–†–ê–õ ({actualKegs} —à—Ç)
                                    </button>
                                </div>
                            );
                        case 3: // Cash Collection
                            return (
                                <div className="animate-fade">
                                    <h2 className="text-xl font-bold mb-4 flex items-center gap-2"><Icon name="banknote"/> –û–ø–ª–∞—Ç–∞</h2>
                                    <div className="bg-slate-800 p-6 rounded-2xl mb-6">
                                        <div className="flex justify-between items-center mb-4">
                                            <span className="text-slate-400">–ö –æ–ø–ª–∞—Ç–µ:</span>
                                            <span className="text-2xl font-bold text-white">{formatMoney(currentStop.tasks.cash)}</span>
                                        </div>
                                        
                                        {/* Input for Manual Entry */}
                                        {currentStop.tasks.cash > 0 && (
                                            <div className="mb-4">
                                                <div className="text-xs text-slate-400 mb-1">–§–∞–∫—Ç–∏—á–µ—Å–∫–∏ –¥–∞–ª–∏ (‚ÇΩ):</div>
                                                <div className="flex items-center bg-slate-900 rounded-xl border border-slate-600 p-1">
                                                    <input 
                                                        type="number" 
                                                        className="bg-transparent w-full p-3 text-xl font-bold text-white outline-none"
                                                        value={enteredCash}
                                                        onChange={(e) => setEnteredCash(e.target.value)}
                                                    />
                                                    <button onClick={() => setEnteredCash(currentStop.tasks.cash)} className="bg-slate-700 p-2 rounded-lg text-xs font-bold text-slate-300 mr-1">
                                                        –í–°–ï
                                                    </button>
                                                </div>
                                            </div>
                                        )}

                                        {currentStop.tasks.cash > 0 ? (
                                            <div className="space-y-3">
                                                <button onClick={() => {
                                                    setCashOnHand(prev => prev + Number(enteredCash));
                                                    setStep(4);
                                                }} className="w-full py-4 bg-emerald-600 rounded-xl font-bold text-lg active:scale-95 shadow-lg shadow-emerald-900/30">
                                                    –ü–æ–ª—É—á–∏–ª {Number(enteredCash) > 0 ? formatMoney(enteredCash) : '–ù–∞–ª–∏—á–Ω—ã–µ'}
                                                </button>
                                                <button onClick={() => setStep(4)} className="w-full py-4 bg-slate-700 rounded-xl font-bold text-lg active:scale-95">
                                                    –û–ø–ª–∞—Ç–∞ –ë–µ–∑–Ω–∞–ª / –ü–µ—Ä–µ–≤–æ–¥
                                                </button>
                                                <button onClick={() => setStep(4)} className="w-full py-4 bg-red-900/50 text-red-200 border border-red-500/50 rounded-xl font-bold text-lg active:scale-95">
                                                    –ù–µ –∑–∞–ø–ª–∞—Ç–∏–ª–∏ (–í –¥–æ–ª–≥)
                                                </button>
                                            </div>
                                        ) : (
                                            <div className="text-center text-emerald-400 font-bold py-4">–û–ø–ª–∞—á–µ–Ω–æ –∑–∞—Ä–∞–Ω–µ–µ / –û—Ç—Å—Ä–æ—á–∫–∞</div>
                                        )}
                                    </div>
                                    {currentStop.tasks.cash === 0 && (
                                        <button onClick={() => setStep(4)} className="w-full btn-large bg-blue-600 rounded-xl font-bold">
                                            –ì–û–¢–û–í–û
                                        </button>
                                    )}
                                </div>
                            );
                        case 4: // Finish
                            return (
                                <div className="animate-fade text-center py-10">
                                    <div className="w-24 h-24 bg-emerald-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-[0_0_30px_rgba(16,185,129,0.4)]">
                                        <Icon name="check" size={48} className="text-black"/>
                                    </div>
                                    <h2 className="text-2xl font-bold mb-2">–¢–æ—á–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</h2>
                                    <p className="text-slate-400 mb-8">–î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –¥–∏—Å–ø–µ—Ç—á–µ—Ä—É.</p>
                                    <button onClick={() => {
                                        setCurrentStop(null);
                                        setStep(0);
                                        // Mock update status logic here
                                    }} className="w-full btn-large bg-slate-700 rounded-xl font-bold">
                                        –í–ï–†–ù–£–¢–¨–°–Ø –ö –ú–ê–†–®–†–£–¢–£
                                    </button>
                                </div>
                            );
                    }
                };

                return (
                    <div className="fixed inset-0 z-50 bg-[#0f172a] flex flex-col">
                        <div className="p-4 flex items-center justify-between border-b border-slate-800">
                            <button onClick={() => { setCurrentStop(null); setStep(0); }} className="p-2 -ml-2 text-slate-400">–û—Ç–º–µ–Ω–∞</button>
                            <div className="flex gap-1">
                                {[0,1,2,3].map(s => (
                                    <div key={s} className={`w-2 h-2 rounded-full ${step >= s ? 'bg-blue-500' : 'bg-slate-700'}`}></div>
                                ))}
                            </div>
                        </div>
                        <div className="p-6 flex-1 overflow-y-auto">
                            {renderStep()}
                        </div>
                    </div>
                );
            };

            // --- RENDER ---

            return (
                <div className="max-w-md mx-auto min-h-screen relative pb-20">
                    <div className="p-4 pt-6">
                        <div className="flex justify-between items-center mb-6">
                            <div className="flex items-center gap-3">
                                <div className="w-10 h-10 bg-slate-700 rounded-full flex items-center justify-center">
                                    <Icon name="truck" size={20}/>
                                </div>
                                <div>
                                    <div className="font-bold">{DRIVER_INFO.name}</div>
                                    <div className="text-xs text-slate-400">–ù–∞ —Å–º–µ–Ω–µ</div>
                                </div>
                            </div>
                            <div className="bg-slate-800 px-3 py-1 rounded-lg text-xs font-mono border border-slate-700">
                                v2.1
                            </div>
                        </div>

                        {activeTab === 'loading' && <LoadingScreen />}
                        {activeTab === 'route' && <RouteScreen />}
                        {activeTab === 'cash' && <CashScreen />}
                    </div>

                    {/* Bottom Nav */}
                    <div className="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-[#1e293b] border-t border-slate-700 pb-safe z-40">
                        <div className="flex justify-around items-center h-14">
                            <button onClick={() => setActiveTab('loading')} className={`flex flex-col items-center gap-1 w-full ${activeTab === 'loading' ? 'text-blue-400' : 'text-slate-500'}`}>
                                <Icon name="package-check" size={20}/>
                                <span className="text-[10px] font-bold">–ó–∞–≥—Ä—É–∑–∫–∞</span>
                            </button>
                            <button onClick={() => setActiveTab('route')} className={`flex flex-col items-center gap-1 w-full ${activeTab === 'route' ? 'text-blue-400' : 'text-slate-500'}`}>
                                <Icon name="navigation" size={20}/>
                                <span className="text-[10px] font-bold">–ú–∞—Ä—à—Ä—É—Ç</span>
                            </button>
                            <button onClick={() => setActiveTab('cash')} className={`flex flex-col items-center gap-1 w-full ${activeTab === 'cash' ? 'text-blue-400' : 'text-slate-500'}`}>
                                <Icon name="banknote" size={20}/>
                                <span className="text-[10px] font-bold">–ö–∞—Å—Å–∞</span>
                            </button>
                        </div>
                    </div>

                    {currentStop && <StopModal />}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>